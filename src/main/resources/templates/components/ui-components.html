<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>TaskHelper UI Components</title>
  <style>
    /* ========================================
     * Component-specific CSS Classes
     * ======================================== */
    
    /* Service Card Mobile Optimization - Prevent layout shift */
    .service-card {
      transform: translateY(0) !important;
      transition: all 0.3s ease !important;
    }
    
    .service-card:hover {
      transform: translateY(0) scale(1.02) !important;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
    }
    
    .service-card.selected {
      transform: translateY(0) scale(1.02) !important;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
    }
    
    /* Terms & Conditions Checkbox Constraints */
    .terms-checkbox {
      width: 16px !important;
      height: 16px !important;
      min-width: 16px !important;
      min-height: 16px !important;
      max-width: 16px !important;
      max-height: 16px !important;
      flex-shrink: 0 !important;
      flex-grow: 0 !important;
    }
    
    /* Task Dashboard Button System - Universal Color Meanings */
    .btn-primary { /* Main actions like "詳細を見る" */
      @apply bg-blue-600 text-white hover:bg-blue-700 transition-all duration-200 shadow-sm;
    }
    
    .btn-success { /* Positive actions like "入金する" */
      @apply bg-green-600 text-white hover:bg-green-700 transition-all duration-200 shadow-sm;
    }
    
    .btn-warning { /* Rating actions like "評価する" */
      @apply bg-yellow-500 text-white hover:bg-yellow-600 transition-all duration-200 shadow-sm;
    }
    
    .btn-secondary { /* Supporting actions like "編集", "連絡" */
      @apply border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 transition-all duration-200;
    }
    
    .btn-danger { /* Destructive actions - icon only */
      @apply text-red-600 hover:bg-red-50 transition-all duration-200;
    }

    /* Terms container layout - Responsive flex layout for mobile optimization */
    .terms-container {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.5rem;
      max-width: 100%;
    }
    
    /* Terms content wrapper - Flex optimization */
    .terms-content {
      flex: 1;
      min-width: 0; /* Allow flexbox children to shrink */
    }
    
    /* Label text constraint - Prevent unnecessary line breaks */
    .terms-label {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Mobile exception - Allow wrapping on very small screens only */
    @media (max-width: 320px) {
      .terms-label {
        white-space: normal;
      }
    }
  </style>
</head>
<body>

<!-- ========================================
     Button Components
     Based on patterns from index.html and register.html
     ======================================== -->

<!-- Primary Button -->
<th:block th:fragment="btn-primary(text, icon, type)">
  <button th:type="${type ?: 'button'}" 
          class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300">
    <i th:if="${icon}" th:class="${icon} + ' mr-2'" aria-hidden="true"></i>
    <span th:text="${text}">Button</span>
  </button>
</th:block>

<!-- Secondary Button -->
<th:block th:fragment="btn-secondary(text, icon, type)">
  <button th:type="${type ?: 'button'}" 
          class="border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-gray-300">
    <i th:if="${icon}" th:class="${icon} + ' mr-2'" aria-hidden="true"></i>
    <span th:text="${text}">Button</span>
  </button>
</th:block>

<!-- Brand Gradient Button -->
<th:block th:fragment="btn-gradient(text, icon, type)">
  <button th:type="${type ?: 'button'}" 
          class="bg-gradient-to-r from-gray-800 via-blue-700 to-gray-800 text-white px-6 py-3 rounded-lg font-semibold hover:from-gray-900 hover:via-blue-800 hover:to-gray-900 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 shadow-lg hover:shadow-xl">
    <i th:if="${icon}" th:class="${icon} + ' mr-2'" aria-hidden="true"></i>
    <span th:text="${text}">Button</span>
  </button>
</th:block>

<!-- ========================================
     Card Components
     ======================================== -->

<!-- Task Card -->
<th:block th:fragment="task-card(title, category, location, price, time, urgent)">
  <div class="service-card task-card bg-white rounded-2xl p-6 hover:shadow-xl transition-all duration-500">
    <!-- Urgent Badge -->
    <div th:if="${urgent}" class="mb-3">
      <span class="bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm font-semibold">
        <i class="fas fa-fire mr-1"></i>緊急
      </span>
    </div>
    
    <!-- Title -->
    <h3 class="text-lg font-bold text-gray-900 mb-2" th:text="${title}">Task Title</h3>
    
    <!-- Category -->
    <div class="flex items-center text-sm text-gray-500 mb-2">
      <i class="fas fa-tag mr-2"></i>
      <span th:text="${category}">Category</span>
    </div>
    
    <!-- Location -->
    <div class="flex items-center text-sm text-gray-500 mb-2">
      <i class="fas fa-map-marker-alt mr-2"></i>
      <span th:text="${location}">Location</span>
    </div>
    
    <!-- Price -->
    <div class="text-xl font-bold text-blue-600 mb-3">
      ¥<span th:text="${price}">0</span>
    </div>
    
    <!-- Time -->
    <div class="text-xs text-gray-400">
      <span data-time th:attr="data-time=${time}">Just now</span>
    </div>
  </div>
</th:block>

<!-- Category Card -->
<th:block th:fragment="category-card(category, icon, title, subtitle)">
  <div th:classappend="${category == 'shopping' ? 'hover:border-green-200' :
                        category == 'cleaning' ? 'hover:border-blue-200' :
                        category == 'delivery' ? 'hover:border-orange-200' :
                        category == 'petcare' ? 'hover:border-purple-200' :
                        category == 'repairs' ? 'hover:border-red-200' :
                        'hover:border-gray-200'}"
       class="service-card group bg-white border border-gray-200 p-6 rounded-2xl text-center hover:shadow-xl transition-all duration-500 cursor-pointer">
    
    <div th:classappend="${category == 'shopping' ? 'from-green-400 to-green-600' :
                          category == 'cleaning' ? 'from-blue-400 to-blue-600' :
                          category == 'delivery' ? 'from-orange-400 to-orange-600' :
                          category == 'petcare' ? 'from-purple-400 to-purple-600' :
                          category == 'repairs' ? 'from-red-400 to-red-600' :
                          'from-gray-400 to-gray-600'}"
         class="w-16 h-16 bg-gradient-to-br rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-all duration-300 shadow-lg">
      <i th:class="${icon} + ' text-2xl text-white'" aria-hidden="true"></i>
    </div>
    
    <h3 th:classappend="${category == 'shopping' ? 'group-hover:text-green-700' :
                         category == 'cleaning' ? 'group-hover:text-blue-700' :
                         category == 'delivery' ? 'group-hover:text-orange-700' :
                         category == 'petcare' ? 'group-hover:text-purple-700' :
                         category == 'repairs' ? 'group-hover:text-red-700' :
                         'group-hover:text-gray-700'}"
        class="font-bold text-gray-900 mb-2 transition-colors"
        th:text="${title}">Category</h3>
    
    <p th:classappend="${category == 'shopping' ? 'group-hover:text-green-600' :
                        category == 'cleaning' ? 'group-hover:text-blue-600' :
                        category == 'delivery' ? 'group-hover:text-orange-600' :
                        category == 'petcare' ? 'group-hover:text-purple-600' :
                        category == 'repairs' ? 'group-hover:text-red-600' :
                        'group-hover:text-gray-600'}"
       class="text-sm text-gray-600 transition-colors"
       th:text="${subtitle}">Description</p>
  </div>
</th:block>

<!-- Mobile Optimized Service Card (for Helper Registration) -->
<th:block th:fragment="service-card-mobile(category, icon, title, onclick)">
  <div th:onclick="${onclick}"
       th:classappend="${category == 'shopping' ? 'hover:border-green-200 hover:bg-gradient-to-br hover:from-green-50 hover:to-green-100' :
                        category == 'cleaning' ? 'hover:border-blue-200 hover:bg-gradient-to-br hover:from-blue-50 hover:to-blue-100' :
                        category == 'delivery' ? 'hover:border-orange-200 hover:bg-gradient-to-br hover:from-orange-50 hover:to-orange-100' :
                        category == 'petcare' ? 'hover:border-purple-200 hover:bg-gradient-to-br hover:from-purple-50 hover:to-purple-100' :
                        category == 'repairs' ? 'hover:border-red-200 hover:bg-gradient-to-br hover:from-red-50 hover:to-red-100' :
                        'hover:border-gray-300 hover:bg-gradient-to-br hover:from-gray-50 hover:to-gray-100'}"
       class="service-card group bg-white border border-gray-200 rounded-lg p-1.5 sm:p-2 text-center cursor-pointer">
    
    <div th:classappend="${category == 'shopping' ? 'from-green-400 to-green-600' :
                          category == 'cleaning' ? 'from-blue-400 to-blue-600' :
                          category == 'delivery' ? 'from-orange-400 to-orange-600' :
                          category == 'petcare' ? 'from-purple-400 to-purple-600' :
                          category == 'repairs' ? 'from-red-400 to-red-600' :
                          'from-gray-400 to-gray-600'}"
         class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br rounded-lg flex items-center justify-center mx-auto mb-1 group-hover:scale-110 transition-all duration-300 shadow-md">
      <i th:class="${icon} + ' text-sm text-white'" aria-hidden="true"></i>
    </div>
    
    <h3 th:classappend="${category == 'shopping' ? 'group-hover:text-green-700' :
                         category == 'cleaning' ? 'group-hover:text-blue-700' :
                         category == 'delivery' ? 'group-hover:text-orange-700' :
                         category == 'petcare' ? 'group-hover:text-purple-700' :
                         category == 'repairs' ? 'group-hover:text-red-700' :
                         'group-hover:text-gray-700'}"
        class="text-xs font-semibold text-gray-900 transition-colors"
        th:text="${title}">Service</h3>
  </div>
</th:block>

<!-- Registration Form Components (REFERENCE ONLY - DO NOT USE th:replace) -->
<!-- User Type Selection Card -->
<th:block th:fragment="user-type-selection-card">
  <!-- COPY this structure for user type selection in registration -->
  <div class="user-type-card border-2 border-gray-200 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:border-blue-300 hover:bg-blue-50">
    <div class="flex items-center space-x-3">
      <div class="flex-shrink-0">
        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
          <i class="fas fa-user text-blue-600 text-xl"></i>
        </div>
      </div>
      <div class="flex-1">
        <h4 class="font-semibold text-gray-900">依頼者として開始</h4>
        <p class="text-sm text-gray-600">代行を依頼してヘルパーを見つけましょう</p>
      </div>
      <div class="check-icon hidden text-blue-600">
        <i class="fas fa-check-circle text-xl"></i>
      </div>
    </div>
  </div>
</th:block>

<!-- Service Selection Grid for Helper Registration -->
<th:block th:fragment="service-selection-grid">
  <!-- COPY this structure for helper service selection -->
  <div class="grid grid-cols-3 gap-1.5 px-2">
    <!-- Shopping Service -->
    <div @click="toggleService('shopping')" 
         class="service-card group bg-white border border-gray-200 rounded-lg p-1.5 sm:p-2 aspect-square flex flex-col items-center justify-center cursor-pointer hover:border-green-200 hover:bg-gradient-to-br hover:from-green-50 hover:to-green-100">
      <div class="w-6 h-6 sm:w-7 sm:h-7 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center mb-0.5 group-hover:scale-110 transition-all duration-300 shadow-sm">
        <i class="fas fa-shopping-cart text-sm text-white"></i>
      </div>
      <h3 class="text-[10px] sm:text-xs font-medium text-gray-900 transition-colors group-hover:text-green-700">買い物</h3>
    </div>
    <!-- Additional services follow same pattern -->
  </div>
</th:block>

<!-- Password Requirements Indicator -->
<th:block th:fragment="password-requirements">
  <!-- COPY this structure for password strength indicator -->
  <div class="mt-2 space-y-1">
    <div class="flex items-center text-xs transition-all duration-200">
      <i class="fas fa-circle text-gray-400 mr-2 text-xs"></i>
      <span>8文字以上</span>
    </div>
    <div class="flex items-center text-xs transition-all duration-200">
      <i class="fas fa-circle text-gray-400 mr-2 text-xs"></i>
      <span>英数字を含む</span>
    </div>
    <div class="flex items-center text-xs transition-all duration-200">
      <i class="fas fa-circle text-gray-400 mr-2 text-xs"></i>
      <span>記号を含む</span>
    </div>
  </div>
</th:block>

<!-- Social Login Button Reference -->
<th:block th:fragment="social-login-button">
  <!-- COPY this structure for social login buttons -->
  <!-- LINE -->
  <button type="button" class="group flex items-center justify-center py-3 px-4 bg-green-500 hover:bg-green-600 rounded-xl text-white transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
    <i class="fab fa-line text-white text-lg group-hover:scale-110 transition-transform duration-200"></i>
    <span class="ml-2 text-sm font-medium">LINE</span>
  </button>
  <!-- Yahoo -->
  <button type="button" class="group flex items-center justify-center py-3 px-4 bg-red-600 hover:bg-red-700 rounded-xl text-white transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
    <i class="fab fa-yahoo text-white text-lg group-hover:scale-110 transition-transform duration-200"></i>
    <span class="ml-2 text-sm font-medium">Yahoo!</span>
  </button>
</th:block>

<!-- Task Dashboard Card Reference (COPY STRUCTURE ONLY) -->
<th:block th:fragment="task-dashboard-card">
  <!-- DO NOT USE th:replace - Copy structure and adapt -->
  <div class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100">
    <!-- Card Header -->
    <div class="flex justify-between items-start mb-4">
      <div class="flex-1">
        <div class="flex items-center gap-2 mb-2">
          <!-- Status Badge -->
          <span class="px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
            <i class="fas fa-clock mr-1"></i>Status
          </span>
          <!-- Category Badge -->
          <span class="px-2 py-1 rounded text-xs bg-blue-100 text-blue-800">
            <i class="fas fa-shopping-cart mr-1"></i>Category
          </span>
        </div>
        <h3 class="text-lg font-bold text-gray-800 mb-1">Task Title</h3>
        <p class="text-sm text-gray-500">Created/Completed Date</p>
      </div>
      <div class="text-right">
        <p class="text-2xl font-bold text-blue-600">¥5,000</p>
        <p class="text-xs text-gray-500">Applicants or Rating</p>
      </div>
    </div>
    <!-- Card Content -->
    <p class="text-gray-600 text-sm mb-4 line-clamp-2">Task description</p>
    <!-- Card Meta -->
    <div class="flex items-center text-xs text-gray-500 mb-4 space-x-4">
      <span><i class="fas fa-map-marker-alt mr-1"></i>Location</span>
      <span><i class="fas fa-users mr-1"></i>Status Info</span>
    </div>
    <!-- Card Actions -->
    <div class="flex gap-2">
      <button class="flex-1 bg-blue-600 text-white py-2.5 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200 shadow-sm">
        <i class="fas fa-eye mr-1.5"></i>詳細を見る
      </button>
      <button class="flex-1 border border-gray-300 bg-white text-gray-700 py-2.5 px-4 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200">
        <i class="fas fa-edit mr-1.5"></i>編集
      </button>
    </div>
  </div>
</th:block>

<!-- Helper Dashboard Card Reference (COPY STRUCTURE ONLY) -->
<th:block th:fragment="helper-dashboard-card">
  <!-- DO NOT USE th:replace - Copy structure and adapt -->
  <div class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100">
    <!-- Card Header -->
    <div class="flex justify-between items-start mb-4">
      <div class="flex-1">
        <div class="flex items-center gap-2 mb-2">
          <!-- Helper Status Badge -->
          <span class="px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
            <i class="fas fa-hourglass-half mr-1"></i>選考中
          </span>
          <!-- Category Badge -->
          <span class="px-2 py-1 rounded text-xs bg-green-100 text-green-800">
            <i class="fas fa-shopping-cart mr-1"></i>買い物
          </span>
        </div>
        <h3 class="text-lg font-bold text-gray-800 mb-1">Task Title</h3>
        <p class="text-sm text-gray-500">Applied/Completed Date</p>
      </div>
      <div class="text-right">
        <p class="text-2xl font-bold text-purple-600">¥5,000</p>
        <p class="text-xs text-gray-500">Competitors or Rating</p>
      </div>
    </div>
    <!-- Card Content -->
    <p class="text-gray-600 text-sm mb-4 line-clamp-2">Task description</p>
    <!-- Card Meta -->
    <div class="flex items-center text-xs text-gray-500 mb-4 space-x-4">
      <span><i class="fas fa-map-marker-alt mr-1"></i>Location</span>
      <span><i class="fas fa-users mr-1"></i>Status Info</span>
    </div>
    <!-- Helper Card Actions -->
    <div class="flex gap-2">
      <button class="flex-1 bg-purple-600 text-white py-2.5 px-4 rounded-lg font-semibold hover:bg-purple-700 transition-all duration-200 shadow-sm">
        <i class="fas fa-eye mr-1.5"></i>詳細を見る
      </button>
      <button class="px-3 py-2.5 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200" title="取り下げ">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>
</th:block>

<!-- Alpine.js Filter State Pattern Reference -->
<th:block th:fragment="alpine-filter-pattern">
  <!-- DO NOT USE th:replace - Copy Alpine.js pattern -->
  <script>
    // Separate filter state management for tabs
    function dashboardManager() {
      return {
        activeView: 'posted', // or 'applied'
        postedFilter: 'all',  // Filter for first tab
        appliedFilter: 'all', // Filter for second tab
        get statusFilter() {
          return this.activeView === 'posted' ? this.postedFilter : this.appliedFilter;
        },
        set statusFilter(value) {
          if (this.activeView === 'posted') {
            this.postedFilter = value;
          } else {
            this.appliedFilter = value;
          }
        }
      };
    }
  </script>
</th:block>

<!-- Feature Card -->
<th:block th:fragment="feature-card(icon, iconColor, title, description)">
  <div class="group relative overflow-hidden bg-white rounded-3xl p-8 text-center hover:shadow-2xl hover:-translate-y-3 transition-all duration-500 border"
       th:classappend="${iconColor} + '-100 hover:border-' + ${iconColor} + '-300'">
    <div th:classappend="'from-' + ${iconColor} + '-50'"
         class="absolute inset-0 bg-gradient-to-br to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
    <div class="relative z-10">
      <div th:classappend="'from-' + ${iconColor} + '-500 to-' + ${iconColor} + '-600'"
           class="w-20 h-20 bg-gradient-to-br rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-all duration-500 shadow-xl">
        <i th:class="${icon} + ' text-3xl text-white'" aria-hidden="true"></i>
      </div>
      <h3 th:classappend="'group-hover:text-' + ${iconColor} + '-700'"
          class="text-xl font-bold mb-4 text-gray-900 transition-colors"
          th:text="${title}">Feature Title</h3>
      <p class="text-gray-600 leading-relaxed group-hover:text-gray-700 transition-colors"
         th:text="${description}">Feature description</p>
    </div>
  </div>
</th:block>

<!-- User Type Selection Component -->
<th:block th:fragment="user-type-selection()">
  <div class="space-y-3">
    <h3 class="text-lg font-semibold text-gray-900 text-center">どのようにご利用予定ですか？</h3>

    <div class="grid grid-cols-1 gap-4">
      <!-- User Option -->
      <label class="relative">
        <input type="radio" name="role" value="user" class="sr-only user-type-radio" checked 
               x-model="form.role" @change="handleRoleChange($event)">
        <div class="user-type-card border-2 border-gray-200 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:border-blue-300 hover:bg-blue-50">
          <div class="flex items-center space-x-3">
            <div class="flex-shrink-0">
              <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                <i class="fas fa-user text-blue-600 text-xl"></i>
              </div>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-gray-900">依頼者として開始</h4>
              <p class="text-sm text-gray-600">代行を依頼してヘルパーを見つけましょう</p>
            </div>
            <div class="check-icon hidden text-blue-600">
              <i class="fas fa-check-circle text-xl"></i>
            </div>
          </div>
        </div>
      </label>

      <!-- Helper Option -->
      <label class="relative">
        <input type="radio" name="role" value="helper" class="sr-only user-type-radio"
               x-model="form.role" @change="handleRoleChange($event)">
        <div class="user-type-card border-2 border-gray-200 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:border-purple-300 hover:bg-purple-50">
          <div class="flex items-center space-x-3">
            <div class="flex-shrink-0">
              <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                <i class="fas fa-hands-helping text-purple-600 text-xl"></i>
              </div>
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-gray-900">ヘルパーとして開始</h4>
              <p class="text-sm text-gray-600">代行をお手伝いして収益を得てみましょう</p>
            </div>
            <div class="check-icon hidden text-purple-600">
              <i class="fas fa-check-circle text-xl"></i>
            </div>
          </div>
        </div>
      </label>
    </div>
  </div>
</th:block>

<!-- Helper Information Section Component -->
<th:block th:fragment="helper-info-section()">
  <fieldset id="helperInfo" class="overflow-hidden transition-all duration-300" 
            :class="form.role === 'helper' ? 'max-h-[500px] opacity-100 pointer-events-auto' : 'max-h-0 opacity-0 pointer-events-none'">
    <div>
      <legend class="sr-only">ヘルパー追加情報</legend>
      <div class="border-t pt-4">
        <h4 class="font-medium text-gray-900 mb-3">ヘルパー追加情報</h4>

        <!-- Bio Section -->
        <div>
          <label for="bio" class="block text-sm font-medium text-gray-700 mb-1">自己紹介</label>
          <textarea id="bio" name="bio" rows="3"
                    class="w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900"
                    placeholder="簡単な自己紹介を作成してください"></textarea>
        </div>

        <!-- Services Grid -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-4">提供可能サービス</label>
          <div class="grid grid-cols-3 gap-1.5 sm:gap-2">
            <th:block th:replace="~{components/ui-components :: service-card-mobile('shopping', 'fas fa-shopping-cart', '買い物', 'toggleService(\'shopping\')')}"></th:block>
            <th:block th:replace="~{components/ui-components :: service-card-mobile('cleaning', 'fas fa-broom', '掃除', 'toggleService(\'cleaning\')')}"></th:block>
            <th:block th:replace="~{components/ui-components :: service-card-mobile('delivery', 'fas fa-truck', '配送', 'toggleService(\'delivery\')')}"></th:block>
            <th:block th:replace="~{components/ui-components :: service-card-mobile('petcare', 'fas fa-paw', 'ペットケア', 'toggleService(\'petcare\')')}"></th:block>
            <th:block th:replace="~{components/ui-components :: service-card-mobile('repairs', 'fas fa-tools', '修理', 'toggleService(\'repairs\')')}"></th:block>
            <th:block th:replace="~{components/ui-components :: service-card-mobile('others', 'fas fa-ellipsis-h', 'その他', 'toggleService(\'others\')')}"></th:block>
          </div>
        </div>
      </div>
    </div>
  </fieldset>
</th:block>

<!-- ========================================
     Task Creation Components
     ======================================== -->

<!-- Category Selection Card (for task creation) -->
<th:block th:fragment="category-selection-card(category, icon, iconColor, title)">
  <label class="category-card relative group">
    <input type="radio" name="category" th:value="${category}" class="sr-only category-radio" required 
           x-model="form.category" @change="validateField('category')">
    <div th:classappend="${'hover:border-' + iconColor + '-200 hover:bg-gradient-to-br hover:from-' + iconColor + '-50 hover:to-' + iconColor + '-100'}"
         class="bg-white border border-gray-200 p-6 rounded-2xl text-center hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer"
         :class="form.category === th:${category} ? th:${'border-' + iconColor + '-500 bg-gradient-to-br from-' + iconColor + '-50 to-' + iconColor + '-100 shadow-xl scale-105'} : ''">
      <div th:classappend="${'from-' + iconColor + '-400 to-' + iconColor + '-600'}"
           class="w-16 h-16 bg-gradient-to-br rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-all duration-200 shadow-lg"
           :class="form.category === th:${category} ? 'scale-110' : ''">
        <i th:class="${icon} + ' text-2xl text-white'" aria-hidden="true"></i>
      </div>
      <h3 th:classappend="${'group-hover:text-' + iconColor + '-700'}"
          class="font-bold text-gray-900 transition-colors"
          :class="form.category === th:${category} ? th:${'text-' + iconColor + '-700'} : ''"
          th:text="${title}">Category</h3>
    </div>
  </label>
</th:block>

<!-- Enhanced Alpine.js Input Field -->
<th:block th:fragment="alpine-input-field(id, name, type, label, placeholder, required, icon, validation)">
  <div class="space-y-1">
    <label th:for="${id}" class="block text-sm font-medium text-gray-700">
      <span th:text="${label}">Label</span>
      <span th:if="${required}" class="text-red-500 ml-1">*</span>
    </label>
    <div class="relative w-full">
      <div th:if="${icon}" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <i th:class="${icon} + ' text-gray-400 text-sm'" aria-hidden="true"></i>
      </div>
      <input th:id="${id}"
             th:name="${name}"
             th:type="${type}"
             th:placeholder="${placeholder}"
             th:required="${required}"
             th:classappend="${icon} ? 'pl-10' : ''"
             class="w-full pr-4 py-3 border border-gray-300 rounded-xl bg-gray-50/50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900"
             th:attr="x-model='form.' + ${name}, @blur='validateField(\\'' + ${validation} + '\\')'"
             :class="{ 'border-red-300 bg-red-50': errors[th:${validation}], 'border-green-300 bg-green-50': isValid[th:${validation}] && form[th:${validation}] }">
    </div>
    <p th:attr="x-show='errors.' + ${validation}, x-text='errors.' + ${validation}" class="text-xs mt-1 text-red-500"></p>
  </div>
</th:block>

<!-- Responsive Grid Container (2-column desktop, 1-column mobile) -->
<th:block th:fragment="responsive-grid-2col(mobileSpacing, desktopGap)">
  <div th:class="'space-y-' + ${mobileSpacing} + ' lg:grid lg:grid-cols-2 lg:gap-' + ${desktopGap} + ' lg:space-y-0'">
    <!-- Content goes here -->
  </div>
</th:block>

<!-- ========================================
     Form Components
     ======================================== -->

<!-- Input Field -->
<th:block th:fragment="input-field(id, name, type, label, placeholder, required, icon)">
  <div class="mb-4">
    <label th:for="${id}" class="block text-sm font-medium text-gray-700 mb-2">
      <span th:text="${label}">Label</span>
      <span th:if="${required}" class="text-red-500 ml-1">*</span>
    </label>
    <div class="relative">
      <div th:if="${icon}" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <i th:class="${icon} + ' text-gray-400'" aria-hidden="true"></i>
      </div>
      <input th:id="${id}"
             th:name="${name}"
             th:type="${type}"
             th:placeholder="${placeholder}"
             th:required="${required}"
             th:classappend="${icon} ? 'pl-10' : ''"
             class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
    </div>
  </div>
</th:block>

<!-- Checkbox Field -->
<th:block th:fragment="checkbox-field(id, name, value, label, required)">
  <div class="flex items-start">
    <input th:id="${id}"
           th:name="${name}"
           th:value="${value}"
           th:required="${required}"
           type="checkbox"
           class="mt-1 mr-2">
    <label th:for="${id}" class="text-sm text-gray-700 cursor-pointer">
      <span th:text="${label}">Checkbox Label</span>
      <span th:if="${required}" class="text-red-500 ml-1">*</span>
    </label>
  </div>
</th:block>

<!-- Terms & Conditions Component -->
<th:block th:fragment="terms-conditions()">
  <fieldset class="space-y-3 -mt-5">
    <legend class="sr-only">利用規約同意</legend>
    
    <!-- 全ての利用規約に同意 -->
    <div class="flex items-start gap-2">
      <input type="checkbox" id="agreeAll" 
             class="terms-checkbox mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
             @change="handleAgreeAll($event)">
      <label for="agreeAll" class="text-sm text-gray-700 font-medium cursor-pointer">
        全ての利用規約に同意します
      </label>
    </div>

    <!-- 個別利用規約 -->
    <div class="space-y-3 pl-2 sm:pl-6">
      <!-- サービス利用規約 -->
      <div class="terms-container">
        <div class="terms-content flex items-start gap-2">
          <input type="checkbox" id="service-terms" name="terms" value="service" required 
                 class="terms-checkbox mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                 @change="handleTermsChange($event)">
          <label for="service-terms" class="terms-label text-xs sm:text-sm text-gray-700 cursor-pointer leading-tight">
            <span class="inline-block px-1 py-0.5 bg-red-100 text-red-600 text-[10px] sm:text-xs rounded font-medium mr-1">必須</span>
            サービス利用規約
          </label>
        </div>
        <button type="button" class="text-blue-600 hover:text-blue-700 text-xs underline flex-shrink-0" 
                data-micromodal-trigger="modal-service-terms">表示</button>
      </div>

      <!-- 個人情報保護方針 -->
      <div class="terms-container">
        <div class="terms-content flex items-start gap-2">
          <input type="checkbox" id="privacy-terms" name="terms" value="privacy" required 
                 class="terms-checkbox mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                 @change="handleTermsChange($event)">
          <label for="privacy-terms" class="terms-label text-xs sm:text-sm text-gray-700 cursor-pointer leading-tight">
            <span class="inline-block px-1 py-0.5 bg-red-100 text-red-600 text-[10px] sm:text-xs rounded font-medium mr-1">必須</span>
            個人情報保護方針
          </label>
        </div>
        <button type="button" class="text-blue-600 hover:text-blue-700 text-xs underline flex-shrink-0" 
                data-micromodal-trigger="modal-privacy-policy">表示</button>
      </div>

      <!-- マーケティング情報受信 -->
      <div class="terms-container">
        <div class="terms-content flex items-start gap-2">
          <input type="checkbox" id="marketing-terms" name="terms" value="marketing" 
                 class="terms-checkbox mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                 @change="handleTermsChange($event)">
          <label for="marketing-terms" class="terms-label text-xs sm:text-sm text-gray-700 cursor-pointer leading-tight">
            <span class="inline-block px-1 py-0.5 bg-gray-300 text-gray-600 text-[10px] sm:text-xs rounded font-medium mr-1">任意</span>
            マーケティング情報受信
          </label>
        </div>
        <button type="button" class="text-blue-600 hover:text-blue-700 text-xs underline flex-shrink-0" 
                data-micromodal-trigger="modal-marketing-terms">表示</button>
      </div>
    </div>
  </fieldset>
</th:block>

<!-- ========================================
     Modal Components
     ======================================== -->

<!-- Modal Structure -->
<th:block th:fragment="modal(id, title, icon, iconColor)">
  <div class="modal micromodal-slide" th:id="${id}" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
      <div class="modal__container bg-white rounded-2xl shadow-2xl w-[600px] h-[600px] mx-4 flex flex-col" 
           role="dialog" aria-modal="true" th:attr="aria-labelledby=${id} + '-title'">
        
        <!-- Header -->
        <header class="modal__header flex justify-between items-center p-6 border-b border-gray-200 bg-white rounded-t-2xl">
          <h2 class="modal__title text-2xl font-bold text-gray-800" th:id="${id} + '-title'">
            <i th:if="${icon}" th:class="${icon} + ' mr-2 text-' + ${iconColor} + '-600'" aria-hidden="true"></i>
            <span th:text="${title}">Modal Title</span>
          </h2>
          <button class="modal__close text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center transition-all" 
                  aria-label="Close modal" data-micromodal-close>
            <i class="fas fa-times"></i>
          </button>
        </header>
        
        <!-- Content (to be filled by including template) -->
        <main class="modal__content flex-1 p-8 text-gray-700 space-y-8 overflow-y-auto">
          <th:block th:replace="${modalContent}"></th:block>
        </main>
        
        <!-- Footer -->
        <footer class="modal__footer p-4 border-t border-gray-200 bg-gray-50 rounded-b-2xl flex justify-end space-x-3">
          <th:block th:replace="${modalFooter}"></th:block>
        </footer>
      </div>
    </div>
  </div>
</th:block>

<!-- ========================================
     Hero Section Component
     ======================================== -->

<!-- Hero Section -->
<th:block th:fragment="hero-section(title, subtitle, primaryBtnText, primaryBtnLink, secondaryBtnText, secondaryBtnLink)">
  <section class="text-white py-32 relative overflow-hidden">
    <div class="absolute inset-0 w-full h-full bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900"></div>
    <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
      <h1 class="text-5xl font-bold mb-6 hero-title" th:utext="${title}">
        Hero Title
      </h1>
      <p class="text-xl mb-8 hero-subtitle" th:utext="${subtitle}">
        Hero Subtitle
      </p>
      <div class="space-x-4 hero-buttons">
        <a th:href="${primaryBtnLink}" 
           class="bg-white text-gray-800 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-white/50 inline-block"
           th:text="${primaryBtnText}">Primary Button</a>
        <a th:href="${secondaryBtnLink}" 
           class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-gray-800 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-white/50 inline-block"
           th:text="${secondaryBtnText}">Secondary Button</a>
      </div>
    </div>
  </section>
</th:block>

<!-- ========================================
     Login Form Components
     ======================================== -->

<!-- Login Form Section -->
<th:block th:fragment="login-form-section()">
  <section class="text-white py-32 relative overflow-hidden min-h-screen flex items-center" aria-labelledby="login-title">
    <div class="absolute inset-0 w-full h-full bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900"></div>
    <div class="max-w-md mx-auto px-4 relative z-10 w-full">
      
      <!-- Title -->
      <div class="text-center mb-8">
        <h1 id="login-title" class="text-4xl font-bold mb-4 text-white">
          おかえりなさい
        </h1>  
        <div class="w-20 h-1 bg-gradient-to-r from-gray-700 via-blue-600 to-gray-700 mx-auto rounded-full"></div>
      </div>

      <!-- Login Form Card -->
      <div class="bg-white rounded-2xl p-8 shadow-2xl">
        <th:block th:replace="~{components/ui-components :: login-form()}"></th:block>
      </div>
    </div>
  </section>
</th:block>

<!-- Login Form -->
<th:block th:fragment="login-form()">
  <form id="loginForm" class="space-y-6" method="post" th:action="@{/login}" novalidate>
    <!-- Login Fields -->
    <fieldset class="space-y-5">
      <legend class="sr-only">ログイン情報</legend>
      
      <!-- Email Input -->
      <div>
        <label for="username" class="block text-gray-700 font-semibold mb-2 text-sm">メールアドレス</label>
        <input type="email" id="username" name="username" required autocomplete="username"
               class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors"
               placeholder="your@email.com">
      </div>

      <!-- Password Input -->
      <div>
        <label for="password" class="block text-gray-700 font-semibold mb-2 text-sm">パスワード</label>
        <input type="password" id="password" name="password" required autocomplete="current-password"
               class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors"
               placeholder="パスワードを入力">
      </div>
    </fieldset>

    <!-- Submit Button -->
    <button type="submit" id="loginBtn" 
            class="w-full bg-gradient-to-r from-gray-800 via-blue-700 to-gray-800 text-white px-6 py-3 rounded-lg font-semibold hover:from-gray-900 hover:via-blue-800 hover:to-gray-900 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-500/50">
      ログイン
    </button>
  
    <!-- Links Section -->
    <div class="space-y-4">
      <!-- Forgot Password Link -->
      <div class="text-center">
        <a th:href="@{/forgot-password}" 
           class="text-blue-600 hover:text-blue-800 font-medium text-sm hover:underline transition-colors">
          パスワードをお忘れですか？
        </a>
      </div>
    
      <!-- Sign up prompt -->
      <div class="text-center pt-4 border-t border-gray-200">
        <p class="text-gray-600 text-sm">
          アカウントをお持ちでないですか？
          <a th:href="@{/register}" class="text-blue-600 font-semibold hover:text-blue-800 hover:underline transition-colors">
            始める
          </a>
        </p>
        <p class="text-xs text-gray-500 mt-2">
          ※ ソーシャルログインは新規登録時のみご利用いただけます
        </p>
      </div>
    </div>
  </form>
</th:block>

<!-- Login Input Field (Enhanced) -->
<th:block th:fragment="login-input-field(id, name, type, label, placeholder, required, icon)">
  <div>
    <label th:for="${id}" class="block text-gray-700 font-semibold mb-2 text-sm">
      <span th:text="${label}">Label</span>
      <span th:if="${required}" class="text-red-500 ml-1">*</span>
    </label>
    <div class="relative">
      <div th:if="${icon}" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <i th:class="${icon} + ' text-gray-400'" aria-hidden="true"></i>
      </div>
      <input th:id="${id}"
             th:name="${name}"
             th:type="${type}"
             th:placeholder="${placeholder}"
             th:required="${required}"
             th:classappend="${icon} ? 'pl-10' : ''"
             class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors">
    </div>
  </div>
</th:block>

<!-- ========================================
     Section Title Component
     ======================================== -->

<!-- Section Title -->
<th:block th:fragment="section-title(title, subtitle, aos)">
  <div class="text-center mb-16">
    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4" 
        th:attr="data-aos=${aos ? 'fade-up' : null}, data-aos-delay=${aos ? '0' : null}"
        th:text="${title}">Section Title</h2>
    <p th:if="${subtitle}" 
       class="text-xl text-gray-600 max-w-2xl mx-auto"
       th:attr="data-aos=${aos ? 'fade-up' : null}, data-aos-delay=${aos ? '100' : null}"
       th:text="${subtitle}">Section Subtitle</p>
    <div class="w-24 h-1 bg-gradient-to-r from-gray-700 via-blue-600 to-gray-700 mx-auto mt-6 rounded-full"
         th:attr="data-aos=${aos ? 'fade-right' : null}, data-aos-delay=${aos ? '200' : null}"></div>
  </div>
</th:block>

<!-- ========================================
     Task Detail Components
     ======================================== -->

<!-- Unified Primary Button -->
<th:block th:fragment="primary-button(text, icon, onclick, disabled, type)">
  <button th:type="${type != null ? type : 'button'}"
          th:onclick="${onclick}"
          th:disabled="${disabled}"
          th:class="${disabled ? 
            'w-full bg-gray-300 text-gray-500 font-bold py-4 px-6 rounded-xl transition-all duration-300 cursor-not-allowed' : 
            'w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-500/50'}">
    <i th:if="${icon}" th:class="${icon} + ' mr-2'"></i>
    <span th:text="${text}">Button Text</span>
  </button>
</th:block>

<!-- Sticky Sidebar Container -->
<th:block th:fragment="sticky-sidebar(content)">
  <div class="lg:col-span-1 space-y-6 sticky-sidebar">
    <th:block th:replace="${content}"></th:block>
  </div>
</th:block>

<!-- Task Status Badge -->
<th:block th:fragment="task-status-badge(status, statusClass)">
  <div th:class="'bg-gradient-to-r ' + ${statusClass} + ' text-white px-6 py-3'">
    <div class="flex items-center justify-between">
      <span class="text-sm font-medium" th:text="${status}">募集中</span>
      <span class="text-xs" th:text="'投稿日: ' + ${#dates.format(#dates.createNow(), 'yyyy年MM月dd日')}">投稿日: 2025年8月10日</span>
    </div>
  </div>
</th:block>

<!-- Q&A Item -->
<th:block th:fragment="qa-item(questionUser, questionTime, questionText, answerUser, answerTime, answerText, isRequester)">
  <div class="qa-question p-4 rounded-lg">
    <div class="flex items-start space-x-3 mb-3">
      <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-sm font-bold">
        Q
      </div>
      <div class="flex-1">
        <div class="flex items-center space-x-2 mb-1">
          <span class="font-semibold text-gray-800" th:text="${questionUser}">質問者</span>
          <span class="text-xs text-gray-500" th:text="${questionTime}">2時間前</span>
        </div>
        <p class="text-gray-700" th:text="${questionText}">質問内容</p>
      </div>
    </div>
    
    <div th:if="${answerText}" class="flex items-start space-x-3 ml-8 qa-answer p-3 rounded-lg mt-3">
      <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-600">
        A
      </div>
      <div class="flex-1">
        <div class="flex items-center space-x-2 mb-1">
          <span class="font-semibold text-gray-800" th:text="${answerUser}">回答者</span>
          <span class="text-xs text-gray-500" th:text="${answerTime}">1時間前</span>
          <span th:if="${isRequester}" class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full">依頼者</span>
        </div>
        <p class="text-gray-700" th:text="${answerText}">回答内容</p>
      </div>
    </div>
  </div>
</th:block>

<!-- Task Meta Info Grid -->
<th:block th:fragment="task-meta-grid(price, location, date, duration)">
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 pt-4 border-t">
    <div class="bg-gradient-to-br from-gray-50 to-slate-50 border border-gray-200 p-3 rounded-lg hover:-translate-y-0.5 hover:shadow-md transition-all duration-200">
      <p class="text-xs text-gray-500 mb-1">報酬</p>
      <p class="text-lg font-bold text-blue-600" th:text="'¥' + ${price}">¥3,000</p>
    </div>
    <div class="bg-gradient-to-br from-gray-50 to-slate-50 border border-gray-200 p-3 rounded-lg hover:-translate-y-0.5 hover:shadow-md transition-all duration-200">
      <p class="text-xs text-gray-500 mb-1">場所</p>
      <p class="text-sm font-medium text-gray-800" th:text="${location}">渋谷区</p>
    </div>
    <div class="bg-gradient-to-br from-gray-50 to-slate-50 border border-gray-200 p-3 rounded-lg hover:-translate-y-0.5 hover:shadow-md transition-all duration-200">
      <p class="text-xs text-gray-500 mb-1">希望日時</p>
      <p class="text-sm font-medium text-gray-800" th:text="${date}">8月12日 14:00</p>
    </div>
    <div class="bg-gradient-to-br from-gray-50 to-slate-50 border border-gray-200 p-3 rounded-lg hover:-translate-y-0.5 hover:shadow-md transition-all duration-200">
      <p class="text-xs text-gray-500 mb-1">所要時間</p>
      <p class="text-sm font-medium text-gray-800" th:text="${duration}">約2時間</p>
    </div>
  </div>
</th:block>

<!-- Image Placeholder -->
<th:block th:fragment="image-placeholder(iconClass, label, onclick)">
  <div class="relative group cursor-pointer hover:scale-[1.02] hover:shadow-xl transition-all duration-300 ease-out" 
       th:onclick="${onclick}">
    <div class="w-full h-32 bg-gray-200 rounded-lg flex items-center justify-center">
      <div class="text-center text-gray-500">
        <i th:class="${iconClass} + ' text-3xl mb-2'" aria-hidden="true"></i>
        <p class="text-sm" th:text="${label}">画像</p>
      </div>
    </div>
    <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
      <i class="fas fa-search-plus text-white text-2xl"></i>
    </div>
  </div>
</th:block>

</body>
</html>